<mat-card>
  <mat-card-title
    >Aktivität {{subproject.number}}.{{activity.number | number:'3.0'}}</mat-card-title
  >

  <mat-card-content>
    <p>Subproject {{subproject.number}} - {{subproject.name}}</p>

    <form id="activity-edit" [formGroup]="form" (ngSubmit)="submit()" autocomplete="off">
      <mat-form-field>
        <input matInput formControlName="name" placeholder="Name" required />
        <mat-error *ngIf="hasError('name', 'required')"> Pflichtfeld </mat-error>
      </mat-form-field>

      <mat-form-field>
        <input
          matInput
          formControlName="startDate"
          [matDatepicker]="startDatePicker"
          placeholder="Start"
          (focus)="startDatePicker.open()"
          required />
        <mat-datepicker-toggle matSuffix [for]="startDatePicker"></mat-datepicker-toggle>
        <mat-datepicker #startDatePicker></mat-datepicker>
        <mat-error *ngIf="hasError('startDate', 'required')"> Pflichtfeld </mat-error>
      </mat-form-field>

      <mat-form-field>
        <input
          matInput
          formControlName="endDate"
          [matDatepicker]="endDatePicker"
          (focus)="endDatePicker.open()"
          placeholder="Ende"
          [min]="form.controls['startDate'].value" />
        <mat-datepicker-toggle matSuffix [for]="endDatePicker"></mat-datepicker-toggle>
        <mat-datepicker #endDatePicker></mat-datepicker>
        <mat-error *ngIf="hasError('endDate', 'matDatepickerMin')">
          Das Ende einer Aktivität liegt in der Regel nach deren Start.
        </mat-error>
      </mat-form-field>

      <mat-form-field>
        <input matInput type="number" formControlName="budget" placeholder="Budget" />
        <span matSuffix>h</span>
        <mat-error *ngIf="hasError('budget', 'min')">
          Negative Budgets sind nur schwer einzuhalten.
        </mat-error>
      </mat-form-field>

      <mat-checkbox formControlName="isBillable">Verrechenbar</mat-checkbox>
    </form>
  </mat-card-content>

  <mat-card-actions align="end">
    <button mat-button (click)="cancel()">Abbruch</button>
    <button mat-button type="submit" form="activity-edit" [disabled]="!form.valid">
      Speichern
    </button>
  </mat-card-actions>
</mat-card>
